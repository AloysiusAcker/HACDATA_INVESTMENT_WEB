/* ============================================
   ASSET FIXES - Override para visualizaciones
   Resuelve problemas de contraste, overflow y spacing
   ============================================ */

/* ===========================================
   1. RESET Y CONTENCIÓN GLOBAL
   =========================================== */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  width: 100% !important;
  height: 100% !important;
  background: var(--neutral-800, #3A3A38) !important;
  box-sizing: border-box !important;
}

*, *::before, *::after {
  box-sizing: border-box !important;
}

/* ===========================================
   2. CONTRASTE DE TEXTO - FONDO OSCURO
   =========================================== */

/* Texto general - legible en fondo oscuro */
body, p, span, div, li, label, figcaption {
  color: var(--neutral-100, #E5E5E0) !important;
}

/* Títulos y texto destacado - blanco puro */
h1, h2, h3, h4, h5, h6 {
  color: var(--neutral-white, #FFFFFF) !important;
}

strong, b, .bold, .highlight {
  color: var(--neutral-white, #FFFFFF) !important;
}

/* Texto secundario/muted - gris claro visible */
.text-muted, .muted, .subtitle, .caption,
.description, small, .small,
[class*="muted"], [class*="secondary"] {
  color: var(--neutral-250, #91918D) !important;
}

/* Labels y etiquetas pequeñas */
.label, [class*="label"], .tag {
  color: var(--neutral-300, #666663) !important;
}

/* Data source footer */
.data-source {
  color: var(--neutral-400, #52514A) !important;
}

/* Tablas */
th {
  color: var(--neutral-white, #FFFFFF) !important;
  background: var(--neutral-700, #2B2A27) !important;
}

td {
  color: var(--neutral-100, #E5E5E0) !important;
}

/* ===========================================
   3. CONTENCIÓN DE OVERFLOW
   =========================================== */

/* Contenedor principal */
.container, .main, .content, .wrapper,
[class*="container"], [class*="wrapper"] {
  max-width: 100% !important;
  max-height: 100% !important;
  overflow: hidden !important;
  padding: 12px 16px !important;
  box-sizing: border-box !important;
}

/* SVGs y gráficos */
svg {
  max-width: 100% !important;
  height: auto !important;
  overflow: visible !important;
}

/* Contenedores de gráficos */
.chart-container, .viz-container, .graph-container,
[class*="chart"], [class*="graph"], [class*="viz-"] {
  max-width: 100% !important;
  max-height: 100% !important;
  overflow: hidden !important;
  position: relative !important;
}

/* Imágenes */
img {
  max-width: 100% !important;
  height: auto !important;
}

/* ===========================================
   4. MÁRGENES Y PADDING SEGUROS
   =========================================== */

/* Reducir márgenes excesivos */
h1 {
  margin-top: 0 !important;
  margin-bottom: 8px !important;
  font-size: 1.4rem !important;
}

h2 {
  margin-top: 12px !important;
  margin-bottom: 8px !important;
  font-size: 1.1rem !important;
}

h3 {
  margin-top: 8px !important;
  margin-bottom: 6px !important;
  font-size: 0.95rem !important;
}

p {
  margin-top: 0 !important;
  margin-bottom: 8px !important;
  line-height: 1.4 !important;
}

/* Listas compactas */
ul, ol {
  padding-left: 16px !important;
  margin: 8px 0 !important;
}

li {
  margin-bottom: 4px !important;
  line-height: 1.3 !important;
}

/* ===========================================
   5. TABLAS RESPONSIVAS
   =========================================== */

table {
  width: 100% !important;
  table-layout: fixed !important;
  border-collapse: collapse !important;
  font-size: 11px !important;
}

th, td {
  padding: 6px 8px !important;
  border: 1px solid var(--neutral-600, #34332C) !important;
  word-wrap: break-word !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

/* ===========================================
   6. FLEXBOX Y GRID - PREVENIR OVERFLOW
   =========================================== */

[class*="flex"], .flex {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 8px !important;
  overflow: hidden !important;
}

[class*="grid"], .grid {
  display: grid !important;
  gap: 8px !important;
  overflow: hidden !important;
}

/* ===========================================
   7. POSICIONAMIENTO ABSOLUTO - CONTENER
   =========================================== */

/* Elementos con position absolute que pueden salirse */
[style*="position: absolute"],
[style*="position:absolute"] {
  max-width: calc(100% - 20px) !important;
}

/* Nodos y elementos posicionados */
.node, .pillar-node, .card-node,
[class*="node"], [class*="pillar"] {
  max-width: 180px !important;
  font-size: 10px !important;
}

.node h3, .pillar-node h3, [class*="node"] h3 {
  font-size: 11px !important;
}

.node p, .pillar-node p, [class*="node"] p {
  font-size: 9px !important;
}

/* ===========================================
   8. CARDS Y COMPONENTES
   =========================================== */

.card, [class*="card"], .box, .panel {
  padding: 10px !important;
  margin: 4px !important;
  max-width: 100% !important;
  overflow: hidden !important;
  background: var(--neutral-700, #2B2A27) !important;
  border: 1px solid var(--alpha-white-10, rgba(255,255,255,0.1)) !important;
  border-radius: 6px !important;
}

.card h3, .card h4, [class*="card"] h3, [class*="card"] h4 {
  font-size: 12px !important;
  margin-bottom: 4px !important;
}

.card p, [class*="card"] p {
  font-size: 10px !important;
  line-height: 1.3 !important;
}

/* ===========================================
   9. BADGES Y MÉTRICAS
   =========================================== */

.badge, [class*="badge"], .tag, .chip {
  font-size: 9px !important;
  padding: 2px 6px !important;
  white-space: nowrap !important;
}

.metric, .stat-value, [class*="metric"], [class*="stat"] {
  font-size: 18px !important;
  color: var(--neutral-white, #FFFFFF) !important;
}

/* ===========================================
   10. LEYENDAS Y TOOLTIPS
   =========================================== */

.legend, [class*="legend"] {
  font-size: 9px !important;
  padding: 4px 8px !important;
}

.tooltip, [class*="tooltip"] {
  font-size: 10px !important;
  max-width: 200px !important;
  z-index: 1000 !important;
}

/* ===========================================
   11. AJUSTES ESPECÍFICOS POR TIPO
   =========================================== */

/* Timeline elements */
.timeline, [class*="timeline"] {
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

/* Funnel/Pyramid */
.funnel, .pyramid, [class*="funnel"], [class*="pyramid"] {
  max-width: 100% !important;
  transform: scale(0.9) !important;
  transform-origin: center center !important;
}

/* Radial/Circular charts */
.radial, .circular, .pie, [class*="radial"], [class*="pie"] {
  max-width: 90% !important;
  margin: 0 auto !important;
}

/* ===========================================
   12. UTILIDADES DE EMERGENCIA
   =========================================== */

/* Forzar visibilidad de texto */
.force-visible {
  color: var(--neutral-white, #FFFFFF) !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Escalar contenido grande */
.scale-fit {
  transform: scale(0.85) !important;
  transform-origin: top left !important;
}

/* Scrollbar oculto pero funcional */
.scroll-hidden {
  overflow: auto !important;
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

.scroll-hidden::-webkit-scrollbar {
  display: none !important;
}
